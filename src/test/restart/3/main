#### two RBCs around cylinder with one RBC removed by the wall
# nTEST: rstrt.t4
rm -rf bop diag.txt h5 ply rbc.off bin.1 bin.2
:
u.cp.rbc rbc/498.off rbc.off
u.cp.sdf cyl1/cyl.dat  sdf.dat
x=0.75 y=3 z=9; echo 1 0 0 $x  0 1 0 $y  0 0 1 $z  0 0 0 1 >  rbcs-ic.txt
x=8    y=8 z=8; echo 1 0 0 $x  0 1 0 $y  0 0 1 $z  0 0 0 1 >> rbcs-ic.txt
:
u.conf conf/around.h <<!!!
  rbcs tend=0.5
   wall_creation=999 walls kBT=1e-7
   BASE_STRT_DUMP=\"bin.1/strt\"
   strt_dumps=true
   strt_freq=10000
   RESTART=false
   run
   RESTART=true
   pushrbc tend=3.0
   BASE_STRT_READ=\"bin.1/strt\"
   BASE_STRT_DUMP=\"bin.2/strt\"
   run
!!!
:
u.strtdir bin.1
u.strtdir bin.2
:
{ make clean && u.make -j ; } > /dev/null
u.run ./bin.1/udx '
rbc = {
    @include "rbc.test.cfg"
}
dump = {
    parts = true;
    freq_parts = 5000;
};'
:
:
u.run ./bin.2/udx '
rbc = {
    @include "rbc.test.cfg"
}
bforce = {
    type = "constant";
    f = [1.666667, 0., 0.];
};
dump = {
    parts = true;
    freq_parts = 5000;
};'
ply2punto r/00001.ply | uscale 100 > ply.out.txt
