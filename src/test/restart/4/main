#### 3 rigid ellipsoids in double poiseuille, contact
# nTEST: rstrt.t5
:
rm -rf h5 diag.txt solid_diag.txt
echo -e "4.1 21.5 8\n4.1 10.5 8\n11.9 16 8" > rigs-ic.txt
cp data/rig/ellipsoid.ply rig.ply
:
u.conf "$S" u/x "$S/conf/default.h" <<!
   solids contactforces
   BASE_STRT_DUMP=\"bin.1/strt\"
   strt_dumps=true
   strt_freq=10000
   RESTART=false
   run
   RESTART=true
   BASE_STRT_READ=\"bin.1/strt\"
   BASE_STRT_DUMP=\"bin.2/strt\"
   run
!!!
:
{ make clean && u.make -j ; } > /dev/null
:
u.strtdir bin.1
u.strtdir bin.2
:
u.run ./bin.1/udx '
time = {
    type = "const"
    dt = 5e-4
    wall =  0.0595
    end = 0.1
}
glb = {
    L = [16, 32, 16]
}
dump = {
    parts = true;
    freq_parts = 0.0500
};'
u.run ./bin.2/udx '
time = {
    type = "const"
    dt = 5e-4
    end = 0.7
}
glb = {
    L = [16, 32, 16]
}
bforce = {
    type = "double_poiseuille";
    a    = 6.666667;
};
dump = {
    parts = true;
    freq_parts = 0.0500
};'
:
awk '{print $2, $5, $8}' solid_diag_0000.txt | uscale 2.5 > sdiag.out.txt
