#### velocity controller for flow around cylinder
# nTEST: vcon.t0
set -eu
rm -rf h5
:
u.cp.sdf cyl1/cyl.dat sdf.dat
:
u.conf conf/double.poiseuille.h <<!!!
   numberdensity=1
   walls
   run
!!!
(make clean && u.make -j) > /dev/null
u.run ./udx test/vcont/main/vcon.cfg '
time = {
    type = "const"
    dt = 5e-4
    walls = 5e-4
    end = 2.01
}
glb = {
    L = [16, 32, 16]
}
dump = {
    field = true;
    parts = true;
    freq_field = 2.0000
    freq_parts = 4000;
};'
u.avgh5 0 u 2 h5/flowfields-0000.h5 | uscale 0.1 > h5.out.txt
