## using gitlab:ugeom
# TEST: square.out
set -eu
S=`u.cp.s` U=u/x C="$S/conf/test.h"
XS=8 YS=8 ZS=8 a=7
ugeom.square $XS $YS $ZS $a sdf.dat
u.conf "$S" "$U" "$C" <<!
  KL_SYNC
  tend=1e-4 walls wall_creation=1
  run
!
{ u.make clean && u.make -j; } > .make.log
u.run ./udx "
time = {
    type = "const"
    dt = 1e-4
}
glb = {
    L = [$XS, $YS, $ZS]
}
dump = {
    field = true;
    freq_field = 2000;
};"
cp h5/wall.xmf wall.out.xmf
