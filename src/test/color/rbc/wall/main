# two steps of rbc with colors
# TEST: color.rbc.wall.t1
rm -rf bop diag.txt h5 ply rbc.off
u.cp.rbc rbc/498.off rbc.off
u.cp.sdf cyl1/cyl.dat sdf.dat
x=4 y=4 z=7; echo 1 0 0 $x  0 1 0 $y  0 0 1 $z  0 0 0 1 >  rbcs-ic.txt
u.conf conf/double.poiseuille.h <<!!!
   KL_SYNC
   walls wall_creation=1
   rbcs
   multi_solvent=true
   color_freq=1
   tend=1e-3
   numberdensity=1
   run
!!!
{ make clean && u.make -j; } > make.log
u.run ./udx  '
glb = {
    dt = 4e-4
    L = [8, 8, 8]
}
rbc = {
    @include "rbc.test.cfg"
}
dump = {
    parts = true;
    field = true;
    freq_parts = 1;
};'
bop2txt2 bop/solvent-00001.bop -- bop/colors_solvent-00001.bop |
  awk '{s+=$7} END {print s >= 25 && s <= 30}' > color.out.txt
