#!/bin/bash

msg () {
    printf '%s\n' "$@" | cat >&2
}

usg () {
    msg  './configure'
    msg  'adapts udx to systems : we know who you are and where do you live'
    exit
}

main () {
    dn=amlucas dh=panda dc=conf/default.h # defaults
    n=`whoami` h=`hostname`

    case "$h" in
	daint*) h=daint ;;
	*)      h=$dh
    esac

    c=sys/$n.$h
    if test ! -f $c; then c=sys/$dn.$h   ; fi
    if test ! -f $c; then c=sys/$dn.$dh; fi

    msg "cp $c  config.mk"; cp $c  config.mk
    msg "cp $dc conf.h"   ; cp $dc conf.h

}

case $# in
    0) main ;;
    *) usg
esac
