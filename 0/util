msg () { printf ': %s\n' "$*" >&2; }

exec0 () { msg "$@"; "$@"; }
safe_cp () {
    # from/to
    local f t
    f="$1"; shift
    t="$1"; shift
    if test ! -f "$f"
    then msg "not a file: $f"
	 exit 1
    fi
    exec0 ln -s "$f" "$t"
}

ae () {
    awk 'BEGIN {print '"$@"'}'
}

geom () {
    lx=`ae $nx*$xs` ly=`ae $ny*$ys` lz=`ae $nz*$zs`
    rx=$lx          ry=`ae $ly/4`   rz=$lz
}
