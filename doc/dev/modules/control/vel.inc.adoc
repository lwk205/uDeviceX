== Velocity controller

control velocity by modifying the imposed hydrostatic force

=== interface

allocate, deallocate:

[source,cpp]
----
include::{src}/control/vel/imp.h[tags=mem]
----

initialize the transformation structure (to be done only once):

[source,cpp]
----
include::{src}/control/vel/imp.h[tags=ini]
----
the transformation is the way of averaging the velocity:

* cartesian transformation keeps the velocity as it is before averaging.
* radial transformation returns the velocity in polar coordinates
  scaled by the radial position. the `z` component corresponds to
  cartesian transformation


Control operations:

[source,cpp]
----
include::{src}/control/vel/imp.h[tags=int]
----
<1> get average velocity according to transformation and store it
<2> reduce sampled quantities and update the controller. return the force
<3> logging informations; dumped into the file `vcon.txt`

=== configuration

syntax:

[source,cfg]
----
vcon = {
     active = true;
     type   = "cart";          # can be also "rad"
     U      = [1.0, 1.0, 0.0]; # target velocity in transformed space
     log_freq    = 500;
     adjust_freq = 500;
     sample_freq = 1;
};
----
