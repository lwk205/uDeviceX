. u.utils

n=$1; shift
x=$1; shift
y=$1; shift
z=$1; shift
e=$1; shift # executable

# time format: HH.MM

if   test $#   -eq 0
then Time="00:10"
elif test "$1"   = -
then                   shift
else Time="$1"; shift
fi

Args="-oo out.txt -eo err.txt -R rusage[ngpus_excl_p=$n] -W $Time $@"
exec1 bsub -n $n $Args /dev/stdin <<EOF
#!/bin/bash

. u.load.leonhard
`u.wrap "$e"` $x $y $z
EOF
