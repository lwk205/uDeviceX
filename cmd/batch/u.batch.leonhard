. u.utils

n=$1; shift
x=$1; shift
y=$1; shift
z=$1; shift
e=$1; shift # executable

# time format: HH.MM

if   test $#   -eq 0
then Time="-W 00:10"
elif test "$1"   = -
then                   shift
else Time="-W $1"; shift
fi

rargs="rusage[ngpus_excl_p=$n]"
ioargs="-oo out.txt -eo err.txt"

. u.load.leonhard

exec1 bsub -n $n "$ioargs" -R "$rargs" "$Time" $@ `u.wrap "$e"` $x $y $z
