#!/bin/bash

run_one() { # single processor
    exec srun "$e" "$@"
}

run_mpi() {
    exec srun -n $n "$e" $x $y $z "$@"
}

n=$1; shift # n = x*y*z
x=$1; shift
y=$1; shift
z=$1; shift
e=$1; shift # executable

# one processor?
onep() { test $n -eq 1; }
if onep; then run_one "$@"; else run_mpi "$@"; fi
